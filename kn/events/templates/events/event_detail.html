{% extends "events/base.html" %}
{% load base %}

{% block body %}
<h1>{{ event.humanName }}</h1>
<blockquote>{{ event.description_html|safe }}</blockquote>
<dl>
    <dt>Datum</dt>
    <dd>{{ event.when.date }}</dd>
    {% if event.owner %}
    <dt>Georganiseerd door</dt>
    <dd><a href="{{ event.owner.get_absolute_url }}"
            >{{ event.owner.humanName }}</a></dd>
    {% endif %}{# event.owner #}
    {% if event.cost %}
    <dt>Kosten</dt>
    <dd>&euro; {{ event.cost }}</dd>
    {% endif %}{# event.cost #}
</dl>

{% if may_see_subscriptions %}
<h2>Aanmeldingen</h2>

{% if event.subscribed %}
<ul>
{% for sub in event.subscribed %}
    <li>{{ sub.who }}</li>
{% endfor %} {# sub in event.subscribed #}
</ul>
{% else %}{# event.subscribed #}
    Er zijn geen aanmeldingen.
{% endif %}{# event.subscribed #}

{% if event.unsubscribed %}
<h2>Afmeldingen</h2>
<ul>
{% for sub in event.unsubscribed %}
<li><a href="{{ sub.who.get_absolute_url }}"
        >{{ sub.who.humanName }}</a>
    <ul>
    {% for change in sub.changes %}
        <li>
            {{ change.type }}
            {% if change.type == 'subscribed' %}
                aangemeld
            {% endif %}
            op {{ change.when.date }}
        </li>
    {% endfor %}{# change in sub.changes #}
    </ul>
</li>
{% endfor %} {# sub in event.unsubscribed #}
</ul>
{% endif %}{# event.unsubscribed #}

{% if event.reservists %}
<h2>Reservelijst</h2>
<ul>
{% for sub in event.reservists %}
    <li>{{ sub.who }}</li>
{% endfor %} {# sub in event.reservists #}
</ul>
{% endif %}{# event.reservists #}

{% if event.unconfirmed %}
<h2>Onbevestigd</h2>
<ul>
{% for sub in event.unconfirmed %}
    <li>{{ sub.who }}</li>
{% endfor %} {# sub in event.unconfirmed #}
</ul>
{% endif %}{# event.unconfirmed #}

{% endif %}{# may_see_subscriptions #}
{% endblock %}
{# vim: set et sta bs=2 sw=4 : #}
